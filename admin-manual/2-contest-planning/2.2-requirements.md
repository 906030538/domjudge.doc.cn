# 2.2 环境依赖

## 2.2.1 系统要求

布置DOMjudge的要求有：

* 运行评测系统和DOMserver的计算机必须运行Linux（或者DOMserver可以运行在一台Unix的变种上）。这套系统主要在Debian GNU/Linux下开发，手册中页添加了一些与此有关的特性，这些也对Debian的派生系统，比如说Ubuntu有效。DOMjudge也在类RedHat Linux系统下测试过。我们试着遵循POSIX标准，但是尤其是安全解决方案是Linux专属的。
* DOMserver和评测机的（本地）root权限，用于配置sudo，安装有限制性权限的文件，以及安装（卸载）proc文件系统。详情查阅7.3节。
* 一个连接所有DOMjudge参赛队伍主机的TCP/IP网络。推荐使用额外的用于限制因特网访问或其他服务（例如ssh，Email，网络聊天……）的安全服务，但是本软件并不会提供。详情参见7.3节。所有基于网络的互动HTTP或HTTPS协议（TCP端口80或433）完成：
	* 向web服务器发送的来自于队伍，公众或裁判的HTTP流量。
	* 评测机通过HTTP(S)连接到web服务器上的DOMjudge的API。
	* 
	* 命令行提交客户端也通过HTTP(S)连接到web服务器上的API。

---
## 2.2.2 软件要求
DOMjudge运行时需要以下软件支持：

* 对每一种支持的语言都需要有一个对应的编译器，最好是可以产生静态链接的独立可执行文件的那种。
* 支持mod_rewirte的Apache服务器，且须支持PHP >= 7.0 和 the mysqli, GD, curl, json, mbstring, intl, zip 以及 PHP的XML拓展。我们也推荐用于产生额外调试信息的posix拓展。一个Nginx的配置文件也包含在其中，而且可能代替Apache的使用，但是改配置并没有被完全测试或记录。
* MySQL或MariaDB>=5.5.3数据库，以及客户端软件。
* PHP>=7.0命令行交互以及curl和json拓展。
* 在/bin/sh（例如bash或ash）中的POSIX的兼容shell。
* 一个静态编译的POSIX shell，位于`lib/judge/sh-static`（i386/amd64 Linux中包含dash）。
* libcgroup，用于启用Linux cgroup accouing 和安全的支持，参见3.7节。
* 一些标准的（GNU）程序，包括但不限于：hostname, date, dirname, basename, touch, chmod, cp, mv, cat, grep, di, wc, mkdir, mkfo, mount, sleep, head, tail, pgrep, zip, unzip。
* 用于获得root权限的sudo。
* 用于重新产生含有专属网站配置设置的队伍PDF手册的LaTeX。

以下配置是可选的，但是它们通常是有用的或者对某些功能来说是必须的：
* phpMyAdmin，用于紧急情况下访问数据库或数据的导入导出
* NTP守护进程，用于同步比赛/裁判/DOMserver主机的时间
* libcurl和libJSONcpp，用于命令行提交客户端
* libmagic用于命令行提交客户端探测二进制提交文件
* PECL xdiff extension用于可靠地对提交文件进行比较，如果没有安装那么DOMjudge会尝试其他方法比较提交文件
* beep用于使用默认的alert脚本时，对错误，提交和评测发出可听见的通知

配置DOMjudge所需的软件：

* 包含标准库的gcc以及g++；其他的库也可能有效：我们曾成功地用LLVM工程的Clang完全编译了DOMjudge的源文件；C库应支持POSIX.1-2008标准。
* GNU make

---
## 2.2.3 队伍主机的配置要求
最基本的队伍主机只需要一个现代web浏览器（当然还应有必要的程序编写工具），DOMjudge支持所有版本的Firefox，Chrome，Edge。

